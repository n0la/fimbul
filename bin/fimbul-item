#/usr/bin/env lua52

local pretty = require("pl.pretty")

local util = require("fimbul.util")
local repository = require("fimbul.repository")

local r = repository:new(arg[1])
r:load()

function dump_item(i)
   print(i:string(true))
   local p, sv = i:price()
   print(sv:string())
end

local item = r:parse_item("Light Hammer")
dump_item(item)

item = r:parse_item("+2 Cold Iron Longsword")
dump_item(item)

item = r:parse_item("Full Plate")
dump_item(item)

item = r:parse_item("Adamantine Full Plate")
dump_item(item)

item = r:parse_item("+2 Adamantine Half Plate")
dump_item(item)

item = r:parse_item("+1 Mithral Breastplate")
dump_item(item)

item = r:parse_item("+1 Anarchic Battleaxe")
dump_item(item)

ok, item = pcall(repository.parse_item, r, "+9 Anarchic Longsword")
if not ok then
   print(item)
end

item = r:parse_item("+8 Anarchic Greataxe")
dump_item(item)
