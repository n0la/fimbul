#!/usr/bin/env lua

local pretty = require("pl.pretty")

local util = require("fimbul.util")
local repository = require("fimbul.repository")
local console = require("fimbul.ui.console")

local encounter_context = require("fimbul.ui.encounter_context")
local battle_context = require("fimbul.ui.battle_context")

local r = repository:new(arg[1])
r:load()

local c = console:new(r, {name = "encounter"})
local battle = battle_context:new(r)
local encounter = encounter_context:new(r)

c.dispatcher:add(battle)
c.dispatcher:add(encounter)

c:run()
